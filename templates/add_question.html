{% extends 'base.html' %}
{% block title %}Add Feedback Question{% endblock %}
{% block content %}
<div class="container">
    <h2 class="mb-4">âž• Add Feedback Question</h2>
    <form method="POST" id="questionForm">
        {% csrf_token %}

        <div class="mb-3">
            <label for="{{ form.q_id.id_for_label }}" class="form-label">Question ID</label>
            {{ form.q_id }}
        </div>

        <div class="mb-3">
            <label for="{{ form.q_desc.id_for_label }}" class="form-label">Question Description</label>
            {{ form.q_desc }}
        </div>

        <div class="mb-3">
            <label for="{{ form.q_type.id_for_label }}" class="form-label">Question Type</label>
            {{ form.q_type }}
        </div>

        <div class="mb-3">
            <label for="{{ form.active.id_for_label }}" class="form-label">Active</label>
            {{ form.active }}
        </div>

        <!-- Options field for MCQ questions -->
        <div class="mb-3" id="optionsField" style="display: none;">
            <label for="options" class="form-label">Options</label>
            <input type="text" class="form-control" name="options" id="options"
                placeholder="Enter options separated by commas (e.g., Excellent, Very Good, Good, Average, Poor)">
            <small class="form-text text-muted">Separate multiple options with commas</small>
        </div>

        <button type="submit" class="btn btn-success">Submit</button>
        <a href="{% url 'list_questions' %}" class="btn btn-secondary">Back</a>
    </form>
</div>

<script>
    // Show/hide options field based on question type
    document.getElementById('id_q_type').addEventListener('change', function () {
        const optionsField = document.getElementById('optionsField');
        if (this.value === 'MCQ') {
            optionsField.style.display = 'block';
            document.getElementById('options').required = true;
        } else {
            optionsField.style.display = 'none';
            document.getElementById('options').required = false;
        }
    });

    // Check initial state
    if (document.getElementById('id_q_type').value === 'MCQ') {
        document.getElementById('optionsField').style.display = 'block';
    }
</script>
{% endblock %}